var code="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split("");function binToBase64(bitString){for(var result="",tail=bitString.length%6,bitStringTemp1=bitString.substr(0,bitString.length-tail),bitStringTemp2=bitString.substr(bitString.length-tail,tail),i=0;i<bitStringTemp1.length;i+=6){var index=parseInt(bitStringTemp1.substr(i,6),2);result+=code[index]}return bitStringTemp2+=new Array(7-tail).join("0"),tail&&(result+=code[parseInt(bitStringTemp2,2)],result+=new Array((6-tail)/2+1).join("=")),result}function base64ToBin(str){for(var bitString="",tail=0,i=0;i<str.length;i++)if("="!=str[i]){var decode=code.indexOf(str[i]).toString(2);bitString+=new Array(7-decode.length).join("0")+decode}else tail++;return bitString.substr(0,bitString.length-2*tail)}function stringToBin(str){for(var result="",i=0;i<str.length;i++){var charCode=str.charCodeAt(i).toString(2);result+=new Array(9-charCode.length).join("0")+charCode}return result}function BinToStr(Bin){for(var result="",i=0;i<Bin.length;i+=8)result+=String.fromCharCode(parseInt(Bin.substr(i,8),2));return result}window.swal||(window.swal=function(opts,callback){$("#error-modal").modal("show"),$("#error-note").text(opts.text||opts.msg),callback&&callback()}),window.utils={CheckMail:function(mail){return!!/^([a-zA-Z0-9_\.\-])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/.test(mail)},GetQueryParams(key){var arr=window.location.href.split("#")[0].split("?");if(arr.length<2)return null;for(var paramsArr=arr[1].split("&"),res=null,i=0;i<paramsArr.length;i++){if(paramsArr[i].split("=")[0]==key){res=paramsArr[i].split("=")[1];break}}return null==res?null:decodeURI(res)},Now:function(){var dt=new Date,result=dt.getFullYear();return result+="-"+(dt.getMonth()+1),result+="-"+dt.getDate(),result+=" "+dt.getHours(),result+=":"+dt.getMinutes(),result+=":"+dt.getSeconds()},FillEmailTemplate:function(content,obj){content=content.replaceAll(window.staticDatas.emailTemplateDomainName,obj.domain);var signature="";return obj.signature.trim()&&(signature='<div style="width:300px"><hr /></div>'+obj.signature),content=content.replaceAll(window.staticDatas.emailTemplateSignature,signature)},VerifyEmailContent:function(content){return content?-1!=content.indexOf(window.staticDatas.emailTemplateTrackCode)||(this.ShowError(TEXT("模板内容必须包含跟踪标记")),!1):(this.ShowError(TEXT("请输入内容")),!1)},HtmlDecode:function(str){var t=document.createElement("div");return t.innerHTML=str,t.innerText||t.textContent},AddParamToUrl:function(url,key,value){var para="",href=url.split("?")[0];if(-1!=url.indexOf("?")){for(var paraArr=url.split("?")[1].split("&"),i=0;i<paraArr.length;i++)if(-1!=paraArr[i].indexOf(key+"=")){paraArr.splice(i,1);break}paraArr.push(key+"="+value),para=paraArr.join("&")}else para=key+"="+value;return href+"?"+para},RemoveQueryParam(url,key){var href=url.split("?")[0];if(-1!=url.indexOf("?")){for(var paraArr=url.split("?")[1].split("&"),i=0;i<paraArr.length;i++)if(-1!=paraArr[i].indexOf(key+"=")){paraArr.splice(i,1);break}href+="?"+paraArr.join("&")}return href},DecodeBase64:function(str){return BinToStr(base64ToBin(str))},ReadTxtFile:function(file){return new Promise(function(resolve,reject){var reader=new FileReader;reader.onload=function(){resolve(this.result)},reader.readAsText(file)})},RefreshPage:function(hash){if(hash)if(window.location.hash==hash)window.location.reload(!0);else{var url=window.location.href.split("#")[0]+hash;window.location.href=url}else window.location.reload(!0)},ShowSuccess:function(msg,callback){swal({title:"function"==typeof TEXT?TEXT("系统提示"):"系统提示",type:"success",text:msg,showConfirmButton:!0},function(){callback&&callback()})},ShowError:function(msg,callback){swal({title:"function"==typeof TEXT?TEXT("系统提示"):"系统提示",type:"error",text:msg,showConfirmButton:!0},function(){callback&&callback()})},ShowAjaxError:function(e,element){try{e.responseJSON=e.responseJSON||JSON.parse(e.responseText)}catch(err){}var msg=e.responseJSON?e.responseJSON.msg:JSON.stringify(e);element&&e.responseJSON?this.ShowErrorOnPage(msg,element):this.ShowError(msg)},ShowErrorOnPage(msg,element){element.innerText=TEXT(msg),$(element).show()},ShowInfo:function(msg){swal({title:TEXT("系统信息"),text:msg,timer:1e3,showConfirmButton:!1})}},String.prototype.format=function(args){var result=this;if(arguments.length>0)if(1==arguments.length&&"object"==typeof args){for(var key in args)if(void 0!=args[key]){var reg=new RegExp("({"+key+"})","g");result=result.replace(reg,args[key])}}else for(var i=0;i<arguments.length;i++)if(void 0!=arguments[i]){reg=new RegExp("({)"+i+"(})","g");result=result.replace(reg,arguments[i])}return result},String.prototype.cut=function(length){var res=this;return res&&0!=res.length?(res.length>length&&(res=res.substr(0,length-3)+"..."),res):""},String.prototype.trim=function(){return this.replace(/^\s+|\s+$/gm,"")},String.prototype.isMailAddress=function(){return utils.CheckMail(this.toString())},String.prototype.isNullOrEmpty=function(){return 0==this.replace(/ /g,"").length},String.prototype.isMobilePhone=function(){return/^1[34578]\d{9}$/.test(this)},String.prototype.replaceAll=function(str1,str2){return this.replace(new RegExp(str1,"gm"),str2)},String.prototype.isDomain=function(){return/^([a-zA-Z\d][a-zA-Z\d-_]+\.)+[a-zA-Z\d-_][^ ]*$/.test(this)},String.prototype.GetFirstSymbolIndex=function(){for(var x=-1,filterRule=/[^0-9a-zA-Z_]/g,i=0;i<this.length;i++)if(filterRule.test(this[i])){x=i;break}return x};